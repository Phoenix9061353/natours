{"mappings":"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","sources":["public/js/index.js","public/js/leaflet.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","public/js/login.js","public/js/alert.js","public/js/updateSettings.js","public/js/signUp.js","public/js/stripe.js"],"sourcesContent":["/* eslint-disable */\n\nimport 'regenerator-runtime/runtime.js';\n// require('regenerator-runtime/runtime');\nimport { displayMap } from './leaflet';\nimport { login, logout } from './login';\nimport { updateSettings } from './updateSettings';\nimport { signup } from './signUp';\nimport { bookTour } from './stripe';\n\n//DOM Element\nconst leafletMap = document.getElementById('map');\nconst logInForm = document.querySelector('.form--login');\nconst logOutBtn = document.querySelector('.nav__el--logout');\nconst updateDataForm = document.querySelector('.form-user-data');\nconst updatePasswordForm = document.querySelector('.form-user-settings');\nconst signUpForm = document.querySelector('.form--signUp');\nconst bookBtn = document.getElementById('book-tour');\n///////////////////////////////////////////////////////////////////\n//Map\nif (leafletMap) {\n  const locations = JSON.parse(leafletMap.dataset.locations);\n  displayMap(locations);\n}\n\n//Sign up\nif (signUpForm) {\n  signUpForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    document.querySelector('.btn--sign-up').textContent = 'Please waiting...';\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await signup(name, email, password, passwordConfirm);\n    document.querySelector('.btn--sign-up').textContent = 'Sign Up';\n  });\n}\n\n//Log in\nif (logInForm) {\n  logInForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\n//Log out\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\n\n//讓登入的使用者能改自己的資料（名字、email、照片）\nif (updateDataForm) {\n  updateDataForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    document.querySelector('.btn--save-settings').textContent = 'UPDATING...';\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    const photo = document.getElementById('photo').files[0];\n\n    await updateSettings({ name, email, photo }, 'data');\n    document.querySelector('.btn--save-settings').textContent = 'SAVE SETTINGS';\n    window.setTimeout(location.reload(true), 6000);\n  });\n}\n\n//讓登入的使用者能改自己的資料（密碼）\nif (updatePasswordForm) {\n  updatePasswordForm.addEventListener('submit', async (e) => {\n    // // guard to check if different form submitted\n    // if (!e.target.classList.contains('form-user-settings')) {\n    //   return;\n    // }\n    e.preventDefault();\n    document.querySelector('.btn-save-password').textContent = 'Updating...';\n    const oldPassword = document.getElementById('password-current').value;\n    const newPassword = document.getElementById('password').value;\n    const newPasswordConfirm =\n      document.getElementById('password-confirm').value;\n    await updateSettings(\n      { oldPassword, newPassword, newPasswordConfirm },\n      'password'\n    );\n    document.querySelector('.btn-save-password').textContent = 'Save password';\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n}\n\nif (bookBtn)\n  bookBtn.addEventListener('click', (e) => {\n    e.target.textContent = 'Processing...';\n    const { tourId } = e.target.dataset;\n    bookTour(tourId);\n  });\n","/* eslint-disable */\n\nexport const displayMap = (locations) => {\n  const map = L.map('map', { zoomControl: false });\n\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution:\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  }).addTo(map);\n\n  const points = [];\n  locations.forEach((loc) => {\n    points.push([loc.coordinates[1], loc.coordinates[0]]);\n    //Set marker and pop-up\n    L.marker([loc.coordinates[1], loc.coordinates[0]])\n      .addTo(map)\n      .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\n        autoClose: false,\n      })\n      .openPopup();\n  });\n  //Set bounds\n  const bounds = L.latLngBounds(points).pad(0.5);\n  map.fitBounds(bounds);\n  //阻止滾輪縮放地圖\n  map.scrollWheelZoom.disable();\n};\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","/* eslint-disable */\n// import axios from 'axios';\n// const axios = require('axios');\n//use fetch instead of axios\nimport { showAlert } from './alert';\nexport const login = async (email, password) => {\n  const req = await fetch('http://127.0.0.1:3000/api/v1/users/login', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  });\n  const res = await req.json();\n\n  if (res.status === 'success') {\n    showAlert('success', 'Logged in successfully!');\n    window.setTimeout(() => {\n      location.assign('/');\n    }, 1500);\n  } else {\n    showAlert('error', res.message);\n  }\n};\n\nexport const logout = async () => {\n  const req = await fetch('http://127.0.0.1:3000/api/v1/users/logout', {\n    method: 'GET',\n  });\n  const res = await req.json();\n  if (res.status === 'success') {\n    // location.reload(true);\n    window.setTimeout(() => {\n      location.assign('/');\n    }, 500);\n  } else showAlert('error', 'Error logging out! Try again!');\n};\n","/* eslint-disable */\n\nexport const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n};\n//type is 'success' or 'error'\nexport const showAlert = (type, msg) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, 3000);\n};\n","/* eslint-disable */\nimport { showAlert } from './alert';\n\n//type is either password or data\nexport const updateSettings = async (data, type) => {\n  const dt = { ...data };\n  const options = { method: 'PATCH' };\n  const url = type === 'password' ? 'updateMyPassword' : 'updateMe';\n  if (type === 'data') {\n    //用formdata處理有 multipart data的情況\n    const form = new FormData();\n    form.append('name', dt.name);\n    form.append('email', dt.email);\n    form.append('photo', dt.photo);\n    options.body = form;\n  } else {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(dt);\n  }\n  const req = await fetch(`http://127.0.0.1:3000/api/v1/users/${url}`, options);\n\n  const res = await req.json();\n\n  if (res.status === 'success') {\n    showAlert('success', `${type.toUpperCase()} updated successfully!`);\n  } else {\n    showAlert('error', res.message);\n  }\n};\n","/* eslint-disable */\n\nimport { showAlert } from './alert';\nexport const signup = async (name, email, password, passwordConfirm) => {\n  const req = await fetch('http://127.0.0.1:3000/api/v1/users/signup', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password,\n      passwordConfirm,\n    }),\n  });\n  const res = await req.json();\n  if (res.status === 'success') {\n    showAlert('success', 'Sign up successfully!');\n    window.setTimeout(() => {\n      location.assign('/');\n    }, 1500);\n  } else {\n    showAlert('error', res.message);\n  }\n};\n","/* eslint-disable */\n\nimport { showAlert } from './alert';\n\nexport const bookTour = async (tourId) => {\n  const stripe = Stripe(\n    'pk_test_51Loo21IIKOWWxX27FP7yCHnxij7qIjGAmHxtMJVCq5ZTucKXO0ZwP4RLsGypzdBYx4a8DIZYGfr84EeXTOI1UDxQ0003l7V6b5'\n  );\n  //1) Get session from API\n  try {\n    const session = await fetch(\n      `http://127.0.0.1:3000/api/v1/booking/checkout-session/${tourId}`,\n      {\n        method: 'GET',\n      }\n    );\n    const resSession = await session.json();\n    //2) 送出checkout form + 信用卡付帳(導向生成的付款頁面)\n    window.location.replace(resSession.session.url);\n  } catch (err) {\n    showAlert('error', err);\n  }\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../../"}